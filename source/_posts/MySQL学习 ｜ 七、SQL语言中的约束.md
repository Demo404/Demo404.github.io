---
title: MySQL学习 ｜ 七、SQL语言中的约束
date: 2023-08-01 21:34:03
tags:
---

1、概念  

约束是作用于表中字段上的规则，用于限制存储在表中的数据。‍



2、目的‍

保证数据库中数据的正确性、有效性和完整性。‍‍‍‍



3、分类‍

| 约束                       | 描述                                                     | 关键字      |
| -------------------------- | -------------------------------------------------------- | ----------- |
| 非空约束                   | 限制该字段的数据不能为null                               | NOT　NULL   |
| 唯一约束                   | 保证该字段所有的值都是唯一不重复的                       | UNIQUE      |
| 主键约束                   | 主键是一行数据的唯一标识，要求非空且唯一                 | PRIMARY KEY |
| 默认约束                   | 保存数据时如果未指定该字段的值则使用默认约束             | DEFAULT     |
| 检查约束（8.0.16版本之后） | 保证字段值满足某一个条件                                 | CHECK       |
| 外键约束                   | 用来将两张表的数据之间建立连接，保证数据的一致性和完整性 | FOREIGN KEY |



4、外键约束

创建外键

```
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名);
```

删除外键  

```
ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;
```



5、外键的删除/更新行为

| 行为         | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| NO ACTION    | 当在父表中更新/删除记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。（与RESTRICT一致） |
| RESTRICT     | 当在父表中更新/删除记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。（与NO ACTION一致） |
| CASCADE      | 当在父表中更新/删除记录时，首先检查该记录是否有对应外键，如果有删除/更新外键在子表中的记录。（与NO ACTION一致） |
| SET NULL     | 当在父表中删除记录时，首先检查该记录是否有对应外键，如果有则将子表中该外键的值置为null。 |
| SET　DEFAULT | 父表有变更时，字表将外键列设置为一个默认值。（InnoDB引擎不支持） |

语法：

```
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名) ON UPDATE CASCADE ON DELETE CASCADE;
```